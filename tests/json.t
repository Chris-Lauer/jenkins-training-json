#!/usr/bin/perl -w
use Test::More tests => 2;
use Test::Exception;
use JSON;

#unlink('output.json');

#do 'data-to-json.pl';

my $expected = '[["201707311940","4.83e+02"],["201707311945","7.77e+02"],["201707311950","4.97e+02"],["201707311955","9.88e+02"],["201707312000","8.05e+02"],["201707312005","4.93e+02"],["201707312010","5.80e+02"],["201707312015","4.69e+02"],["201707312020","9.25e+02"],["201707312025","4.43e+02"],["201707312030","5.98e+02"],["201707312035","5.61e+02"],["201707312040","6.68e+02"],["201707312045","5.56e+02"],["201707312050","1.06e+03"],["201707312055","7.18e+02"],["201707312100","6.52e+02"],["201707312105","1.23e+03"],["201707312110","7.52e+02"],["201707312115","1.29e+03"],["201707312120","1.06e+03"],["201707312125","7.98e+02"],["201707312130","7.06e+02"],["201707312135","7.06e+02"]]';

my $fh;
open( $fh, "output.json");
$json = <$fh>;
close($fh);

is($json, $expected, "data correct");

lives_ok { decode_json($json) } "json valid";
